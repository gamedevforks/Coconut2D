var Coconut2D = require("D:/mobileFX/Projects/Software/Coconut/Projects/Cavoparadiso.project/.SDK/DeviceWrappers/web/CocoNode/node_modules/org.coconut2d.sdk.server.ASP.CocoNode/bin/CocoNode.node");

var template_folder = "D:/mobileFX/Projects/Software/Coconut/Projects/Cavoparadiso.project/.server/eventpassbook/passbook";
var certificates_folder = "D:/mobileFX/Projects/Software/Coconut/Projects/Cavoparadiso.project/.server/eventpassbook/passbkKeys";
var output_folder = "D:/mobileFX/Projects/Software/Coconut/Projects/Cavoparadiso.project/.server/eventpassbook/temp/A4F403040AB04067A538966275FD9A52";
var PassbookCertificate = certificates_folder + "/gr.cavoparadiso.eventpass.p12";
var IntermediateCertificate = certificates_folder + "/wwdr.cer";

var JSONData = {
   "formatVersion":1,
   "passTypeIdentifier":"pass.gr.cavoparadiso.eventpass",
   "teamIdentifier":"9NWM5VMDKC",
   "organizationName":"Cavo Paradiso S.A.",
   "description":"Cavo Paradiso Event Ticket",
   "foregroundColor":"rgb(255, 255, 255)",
   "backgroundColor":"rgb(56, 54, 55)",
   "labelColor":"rgb(255,255,255)",
   "relevantDate":"2016-09-10T20:55:00+03:00",
   "expirationDate":"2016-09-11T20:55:00+03:00",
   "barcode":{
      "message":"A4F403040AB04067A538966275FD9A52|Rou|2016-03-10|1|Terry & Heavy G|2016-06-11|61.50",
      "format":"PKBarcodeFormatQR",
      "messageEncoding":"UTF8"
   },
   "serialNumber":"CV16E11310",
   "authenticationToken":"A4F403040AB04067A538966275FD9A52",
   "eventTicket":{
      "headerFields":[
         {
            "key":"time",
            "label":"Date",
            "value":"Jun 11"
         }
      ],
      "secondaryFields":[
         {
            "key":"event",
            "label":"EVENT",
            "value":"Terry & Heavy G"
         }
      ],
      "auxiliaryFields":[
         {
            "key":"loc",
            "label":"LOCATION",
            "value":"Cavo Paradiso, Mykonos @Paradiso Bay"
         }
      ],
      "backFields":[
         {
            "key":"webServiceURL",
            "label":"Check for Updates",
            "value":"http://www.cavoserver.gr/passes_service.asp/v1/passes/pass.gr.cavoparadiso.eventpass/CV16E11310"
         },
         {
            "key":"into",
            "label":"Ticket for Event",
            "value":"Terry & Heavy G. \nFor more details, have a look at http://www.cavoserver.gr/event_details.asp?EID=113"
         },
         {
            "key":"info",
            "label":"INFO",
            "value":"Party starts at 23:30.  For groups, you are adviced to check-in all at the same time."
         },
         {
            "key":"faqs",
            "label":"FAQs:",
            "value":"http://www.cavoserver.gr/faqs.asp"
         }
      ]
   }
};

var result = Coconut2D.CreatePassBook(template_folder, 
									  output_folder, 
									  "Cavo.pkpass", 
									  JSON.stringify(JSONData), 
									  IntermediateCertificate, 
									  PassbookCertificate, 
									  function() { Coconut2D.SendEmail(); }
									  );

